(function(e){function t(t){for(var n,o,s=t[0],c=t[1],l=t[2],u=0,m=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&m.push(r[o][0]),r[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);d&&d(t);while(m.length)m.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,s=1;s<a.length;s++){var c=a[s];0!==r[c]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={ivvor:0},i=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var d=c;i.push([4,"chunk-vendors","chunk-common"]),a()})({"16be":function(e,t,a){},"296a":function(e,t,a){},3001:function(e,t,a){},"30fc":function(e,t,a){"use strict";a("16be")},"362e":function(e,t,a){},4:function(e,t,a){e.exports=a("e69e")},"560f":function(e,t,a){"use strict";a("362e")},"57d9":function(e,t,a){},"9c31":function(e,t,a){"use strict";a("3001")},a24a:function(e,t,a){"use strict";a("296a")},b4cd:function(e,t,a){"use strict";a("57d9")},e69e:function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("92c6"),a("4888");var n=a("2b0e"),r=a("2f62"),i=a("4360"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("Title",{attrs:{title:"Ivvor",canDelete:"true"}}),e.isLoggedIn?e._e():a("AuthForm"),e.isLoggedIn?a("NavTabs",{on:{"on-update":e.tabUpdate}}):e._e(),e.isLoggedIn?a("div",[e.active.media?a("Media"):e._e(),e.active.devices?a("Devices"):e._e()],1):e._e(),a("Notification"),a("FooterBar")],1)},s=[],c=a("1da1"),l=(a("96cf"),a("159b"),a("b64b"),a("43b3")),d=a("7289"),u=a("7039"),m=a("d722"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container",attrs:{id:"media"}},[a("h2",{staticClass:"is-size-3"},[e._v("Media")]),a("UploadMedia"),a("h2",{staticClass:"is-size-4"},[e._v("Your Media"),a("h3",{staticClass:"is-size-5 media-header"},[e._v("Permanent Media")]),a("div",{staticClass:"media-collection"},e._l(e.permanentMedia,(function(e){return a("MediaItem",{key:e.id,staticClass:"media-item",attrs:{media:e}})})),1),a("h3",{staticClass:"is-size-5 media-header"},[e._v("Temporary Media")]),a("div",e._l(e.temporaryMedia,(function(e){return a("MediaContainer",{key:e.id,attrs:{dayContent:e}})})),1)])],1)},f=[],v=(a("4de4"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"media-item"}},[a("div",{staticClass:"actions has-text-right"},[a("span",{staticClass:"icon action",on:{click:function(t){return e.deleteMedia(e.media._id)}}},[a("i",{staticClass:"fas fa-trash"})])]),a("figure",[a("img",{attrs:{src:e.imageUrl}})]),a("br")])}),g=[],h=(a("99af"),a("df40")),y={props:["media"],name:"MediaItem",computed:{imageUrl:function(){return"".concat(m["a"].URL,"/media/").concat(this.media._id,"?token=").concat(this.$store.getters.getToken)}},methods:{deleteMedia:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,m["a"].deleteMedia(e,t.$store.getters.getToken);case 3:a.next=9;break;case 5:return a.prev=5,a.t0=a["catch"](0),h["a"].setNotification("danger","Could not delete media"),a.abrupt("return");case 9:t.$store.commit("removeMedia",e);case 10:case"end":return a.stop()}}),a,null,[[0,5]])})))()}}},b=y,_=(a("30fc"),a("2877")),x=Object(_["a"])(b,v,g,!1,null,"418ad11a",null),M=x.exports,w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"upload-media"}},[a("h2",{staticClass:"is-size-4"},[e._v("Upload Media")]),a("div",[a("div",{staticClass:"control image-tag-selection"},[a("p",[e._v("Which collection should this media be added to?")]),a("label",{staticClass:"radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ltag,expression:"ltag"}],attrs:{type:"radio",name:"mtag",value:"permanent"},domProps:{checked:e._q(e.ltag,"permanent")},on:{change:function(t){e.ltag="permanent"}}}),e._v(" Permanent Collection")]),a("br"),a("label",{staticClass:"radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ltag,expression:"ltag"}],attrs:{type:"radio",name:"mtag",value:"temporary"},domProps:{checked:e._q(e.ltag,"temporary")},on:{change:function(t){e.ltag="temporary"}}}),e._v(" Temporary Collection")])]),"temporary"==e.ltag?a("div",[a("label",{attrs:{for:"temporary_month"}},[e._v("Month")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.temporary_month,expression:"temporary_month"}],attrs:{type:"text",id:"temporary_month",name:"temporary_month",maxlength:"2"},domProps:{value:e.temporary_month},on:{input:function(t){t.target.composing||(e.temporary_month=t.target.value)}}}),a("label",{attrs:{for:"temporary_day"}},[e._v("Day")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.temporary_day,expression:"temporary_day"}],attrs:{type:"text",id:"temporary_day",name:"temporary_day",maxlength:"2"},domProps:{value:e.temporary_day},on:{input:function(t){t.target.composing||(e.temporary_day=t.target.value)}}})]):e._e(),"unset"!=e.ltag?a("div",{staticClass:"file is-boxed file-upload"},[a("label",{staticClass:"file-label"},[a("input",{staticClass:"file-input",attrs:{type:"file",name:"file"},on:{change:e.handleFileChange}}),e._m(0),a("span",{staticClass:"file-name"},[e._v(e._s(e.filename))])])]):e._e(),a("button",{staticClass:"button upload-button is-primary",class:{"is-loading":e.isBusy},attrs:{disabled:null===e.file||void 0===e.file||"unset"===e.ltag},on:{click:e.uploadFile}},[e._v("Upload")])])])},C=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"file-cta"},[a("span",{staticClass:"file-icon"},[a("i",{staticClass:"fas fa-upload"})]),a("span",{staticClass:"file-label has-text-centered"},[e._v("Choose a file")])])}],k=(a("a9e3"),a("b0c0"),{name:"UploadMedia",props:["selectedMedia"],data:function(){return{file:null,era:"past",ltag:"unset",isBusy:!1,isHidden:!0,uploadHidden:!0,dateHidden:!0,emotions:[],lcontent:"file",value:[],options:[],linkedMedia:[],temporary_day:0,temporary_month:0}},methods:{uploadFile:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,n,r,i,o,s,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.ltag){t.next=3;break}return h["a"].setNotification("warning","You must select whether media is permanent or temporary"),t.abrupt("return");case 3:if(e.isBusy=!0,t.prev=4,a="","temporary"!==e.ltag){t.next=19;break}if(!isNaN(e.temporary_month)&&!isNaN(e.temporary_month)){t.next=9;break}throw new Exception("Date not valid");case 9:if(n=Number(e.temporary_day),r=Number(e.temporary_month),!(n<1||r<1||r>12)){t.next=13;break}throw new Exception("Date not valid");case 13:if(i=new Date,o=new Date(i.getFullYear(),i.getMonth(),0).getDate(),!(n>o)){t.next=17;break}throw new Exception("Date not valid");case 17:s=new Date(1970,e.temporary_month-1,e.temporary_day),a+="t/".concat(s.getTime());case 19:return t.next=21,m["a"].uploadMedia(e.file,{era:e.era,locket:e.ltag,emotions:a,links:""},e.$store.getters.getToken);case 21:c=t.sent,e.$store.commit("addMedia",c),t.next=28;break;case 25:t.prev=25,t.t0=t["catch"](4),h["a"].setNotification("danger","Something went wrong");case 28:return t.prev=28,e.isBusy=!1,e.options=[],e.value=[],e.ltag="unset",e.file=null,t.finish(28);case 35:case"end":return t.stop()}}),t,null,[[4,25,28,35]])})))()},handleFileChange:function(e){this.file=e.target.files[0]}},computed:{filename:function(){return null===this.file||void 0===this.file?"Your media":this.file.name}}}),T=k,$=(a("a24a"),Object(_["a"])(T,w,C,!1,null,"d7ce33a8",null)),O=$.exports,j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h3",{staticClass:"is-size-5 media-collection-header"},[e._v(e._s(e.dayContent.dateId))]),a("div",{staticClass:"media-collection"},e._l(e.dayContent.content,(function(e){return a("MediaItem",{key:e.id,staticClass:"media-item",attrs:{media:e}})})),1)])},N=[],D={props:["dayContent"],name:"ContainerMedia",components:{MediaItem:M}},P=D,I=(a("b4cd"),Object(_["a"])(P,j,N,!1,null,"2877a84b",null)),E=I.exports,U={name:"Media",components:{UploadMedia:O,MediaItem:M,MediaContainer:E},computed:{permanentMedia:function(){var e=this.$store.getters.getMedia.filter((function(e){return"permanent"===e.locket}));return e.sort((function(e,t){return new Date(e.createdAt)-new Date(t.createdAt)}))},temporaryMedia:function(){var e=this.$store.getters.getMediaByTimeTag;return e.sort((function(e,t){return e.date-t.date}))}}},F=U,B=(a("560f"),Object(_["a"])(F,p,f,!1,null,"e038ef30",null)),R=B.exports,S=a("8bb1"),z=a("046b"),A=a("efac"),L=a("4093"),Y={name:"app",components:{FooterBar:L["a"],Notification:A["a"],Devices:z["a"],NavTabs:S["a"],Media:R,AuthForm:d["a"],Title:l["a"]},data:function(){return{active:{media:!0,devices:!1}}},computed:{isLoggedIn:function(){return this.$store.getters.getToken}},methods:{tabUpdate:function(e){var t=this;Object.keys(this.active).forEach((function(e){t.active[e]=!1})),this.active[e]=!0}},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,n,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=u["a"].get("authToken"),!a){t.next=23;break}return e.$store.commit("updateToken",a),t.prev=3,t.next=6,m["a"].getAllMedia(e.$store.getters.getToken);case 6:return n=t.sent,e.$store.commit("updateMedia",n),t.next=10,m["a"].getDevices(e.$store.getters.getToken);case 10:return r=t.sent,e.$store.commit("updateDevices",r),t.next=14,m["a"].getAllTags(e.$store.getters.getToken);case 14:i=t.sent,e.$store.commit("addTags",i),console.log(e.$store.getters.getMediaByTimeTag),t.next=23;break;case 19:t.prev=19,t.t0=t["catch"](3),console.log(t.t0),h["a"].setNotification("danger","Something went wrong");case 23:case"end":return t.stop()}}),t,null,[[3,19]])})))()}},H=Y,q=(a("9c31"),Object(_["a"])(H,o,s,!1,null,null,null)),J=q.exports;n["a"].use(r["a"]),n["a"].config.productionTip=!1,new n["a"]({store:i["a"],render:function(e){return e(J)}}).$mount("#app")}});
//# sourceMappingURL=ivvor.116ecccd.js.map