(function(e){function t(t){for(var n,s,o=t[0],c=t[1],l=t[2],u=0,m=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&m.push(i[s][0]),i[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);d&&d(t);while(m.length)m.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,o=1;o<a.length;o++){var c=a[o];0!==i[c]&&(n=!1)}n&&(r.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},i={locket:0},r=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var d=c;r.push([3,"chunk-vendors","chunk-common"]),a()})({"072d":function(e,t,a){"use strict";a("898a")},1342:function(e,t,a){"use strict";a("4ede")},3:function(e,t,a){e.exports=a("6d4a")},"46d1":function(e,t,a){"use strict";a("c11d")},"4ede":function(e,t,a){},"6d4a":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("92c6"),a("4888");var n=a("2b0e"),i=a("2f62"),r=a("4360"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("Title",{attrs:{title:"Locket",canDelete:"true"}}),e.isLoggedIn?e._e():a("AuthForm"),e.isLoggedIn?a("NavTabs",{on:{"on-update":e.tabUpdate}}):e._e(),e.isLoggedIn?a("div",[e.active.media?a("Media"):e._e(),e.active.devices?a("Devices"):e._e()],1):e._e(),a("Notification"),a("FooterBar")],1)},o=[],c=a("1da1"),l=(a("96cf"),a("159b"),a("b64b"),a("43b3")),d=a("7289"),u=a("7039"),m=a("d722"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container",attrs:{id:"media"}},[a("h2",{staticClass:"is-size-3"},[e._v("Media")]),a("UploadMedia"),a("h2",{staticClass:"is-size-4"},[e._v("Your Media"),a("h3",{staticClass:"is-size-5 media-header"},[e._v("Permanent Media")]),a("p",{staticClass:"is-size-6"},[e._v("This is your permanent media. You can add a maximum of 7 media items.")]),a("div",{staticClass:"media-collection"},[e._l(e.permanentMedia,(function(e){return a("MediaItem",{key:e.id,staticClass:"media-item",attrs:{media:e}})})),e._l(e.placeholderCountPermanent,(function(t){return a("div",[e._m(0,!0)])}))],2),a("h3",{staticClass:"is-size-5 media-header"},[e._v("Temporary Media")]),a("p",{staticClass:"is-size-6"},[e._v("This is your temporary media. You can add a maximum of 13 items.")]),a("div",{staticClass:"media-collection"},[e._l(e.temporaryMedia,(function(e){return a("MediaItem",{key:e.id,staticClass:"media-item",attrs:{media:e}})})),e._l(e.placeholderCountTemporary,(function(t){return a("div",[e._m(1,!0)])}))],2)])],1)},f=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{margin:"5px"}},[n("img",{attrs:{src:a("5b4d")}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{margin:"5px"}},[n("img",{attrs:{src:a("5b4d")}})])}],h=(a("4de4"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"media-item"}},[a("div",{staticClass:"actions has-text-right"},[a("span",{staticClass:"icon action",on:{click:function(t){return e.deleteMedia(e.media._id)}}},[a("i",{staticClass:"fas fa-trash"})])]),a("figure",[a("img",{attrs:{src:e.imageUrl}})]),a("br"),a("div",{staticClass:"has-text-centered"},[a("div",{staticClass:"date is-size-6"},[a("p",[e._v("Added on:")]),e._v(e._s(e.formattedDate))])])])}),v=[],g=(a("99af"),a("df40")),b={props:["media"],name:"MediaItem",computed:{imageUrl:function(){return"".concat(m["a"].URL,"/media/").concat(this.media._id,"?token=").concat(this.$store.getters.getToken)},formattedDate:function(){var e={weekday:"long",year:"numeric",month:"short",day:"numeric"},t=new Date(this.media.createdAt);return t.toLocaleDateString(e)}},methods:{deleteMedia:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,m["a"].deleteMedia(e,t.$store.getters.getToken);case 3:a.next=9;break;case 5:return a.prev=5,a.t0=a["catch"](0),g["a"].setNotification("danger","Could not delete media"),a.abrupt("return");case 9:t.$store.commit("removeMedia",e);case 10:case"end":return a.stop()}}),a,null,[[0,5]])})))()}}},_=b,y=(a("1342"),a("2877")),C=Object(y["a"])(_,h,v,!1,null,"3ad66284",null),M=C.exports,k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"upload-media"}},[a("h2",{staticClass:"is-size-4"},[e._v("Upload Media")]),a("div",{staticClass:"hide-buttons"},[e.isHidden?a("button",{staticClass:"button",on:{click:e.submit}},[e._v("Add Media")]):a("button",{staticClass:"button",on:{click:e.submit}},[e._v("Close")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isHidden,expression:"!isHidden"}]},[a("div",{staticClass:"file is-boxed file-upload"},[a("label",{staticClass:"file-label"},[a("input",{staticClass:"file-input",attrs:{type:"file",name:"file"},on:{change:e.handleFileChange}}),e._m(0),a("span",{staticClass:"file-name"},[e._v(e._s(e.filename))])])]),a("div",{staticClass:"control image-tag-selection"},[a("p",[e._v("Which collection should this media be added to?")]),a("label",{staticClass:"radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ltag,expression:"ltag"}],attrs:{type:"radio",disabled:0==e.placeholderCountPermanent,name:"mtag",value:"permanent"},domProps:{checked:e._q(e.ltag,"permanent")},on:{change:function(t){e.ltag="permanent"}}}),e._v(" Permanent Collection")]),a("br"),a("label",{staticClass:"radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ltag,expression:"ltag"}],attrs:{type:"radio",name:"mtag",disabled:0==e.placeholderCountTemporary,value:"temporary"},domProps:{checked:e._q(e.ltag,"temporary")},on:{change:function(t){e.ltag="temporary"}}}),e._v(" Temporary Collection")])]),a("div"),a("button",{staticClass:"button upload-button is-primary",class:{"is-loading":e.isBusy},attrs:{disabled:null===e.file||void 0===e.file||"unset"===e.ltag},on:{click:e.uploadFile}},[e._v("Upload")])])])},w=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"file-cta"},[a("span",{staticClass:"file-icon"},[a("i",{staticClass:"fas fa-upload"})]),a("span",{staticClass:"file-label has-text-centered"},[e._v("Choose a file")])])}],x=(a("b0c0"),{name:"UploadMedia",props:["selectedMedia"],data:function(){return{file:null,era:"past",ltag:"unset",isBusy:!1,isHidden:!0,emotions:[],lcontent:"file",value:[],options:[],linkedMedia:[]}},methods:{submit:function(){this.isHidden=!this.isHidden},uploadFile:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.ltag){t.next=3;break}return g["a"].setNotification("warning","You must select whether media is permanent or temporary"),t.abrupt("return");case 3:return e.isBusy=!0,t.prev=4,t.next=7,m["a"].uploadMedia(e.file,{era:e.era,locket:e.ltag,emotions:"",links:""},e.$store.getters.getToken);case 7:a=t.sent,e.file=null,e.$store.commit("addMedia",a),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](4),g["a"].setNotification("danger","Something went wrong"),e.file=null;case 16:return t.prev=16,e.isBusy=!1,e.options=[],e.value=[],e.ltag="unset",t.finish(16);case 22:case"end":return t.stop()}}),t,null,[[4,12,16,22]])})))()},handleFileChange:function(e){this.file=e.target.files[0]}},computed:{filename:function(){return null===this.file||void 0===this.file?"Your media":this.file.name},presentMedia:function(){return this.$store.getters.getMedia.filter((function(e){return"permanent"===e.locket}))},pastMedia:function(){return this.$store.getters.getMedia.filter((function(e){return"temporary"===e.locket}))},placeholderCountPermanent:function(){return 7-this.presentMedia.length},placeholderCountTemporary:function(){return 13-this.pastMedia.length}}}),T=x,$=(a("d646"),Object(y["a"])(T,k,w,!1,null,"646092f9",null)),O=$.exports,j={name:"Media",components:{UploadMedia:O,MediaItem:M},computed:{permanentMedia:function(){var e=this.$store.getters.getMedia.filter((function(e){return"permanent"===e.locket}));return e.sort((function(e,t){return new Date(e.createdAt)-new Date(t.createdAt)}))},temporaryMedia:function(){var e=this.$store.getters.getMedia.filter((function(e){return"temporary"===e.locket}));return e.sort((function(e,t){return new Date(e.createdAt)-new Date(t.createdAt)}))},placeholderCountPermanent:function(){return 7-this.permanentMedia.length},placeholderCountTemporary:function(){return 13-this.temporaryMedia.length}}},P=j,D=(a("46d1"),Object(y["a"])(P,p,f,!1,null,"68b2f8ba",null)),A=D.exports,N=a("8bb1"),S=a("046b"),U=a("efac"),z=a("4093"),E={name:"app",components:{FooterBar:z["a"],Notification:U["a"],Devices:S["a"],NavTabs:N["a"],Media:A,AuthForm:d["a"],Title:l["a"]},data:function(){return{active:{media:!0,devices:!1}}},computed:{isLoggedIn:function(){return this.$store.getters.getToken}},methods:{tabUpdate:function(e){var t=this;Object.keys(this.active).forEach((function(e){t.active[e]=!1})),this.active[e]=!0}},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,n,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=u["a"].get("authToken"),!a){t.next=22;break}return e.$store.commit("updateToken",a),t.prev=3,t.next=6,m["a"].getAllMedia(e.$store.getters.getToken);case 6:return n=t.sent,e.$store.commit("updateMedia",n),t.next=10,m["a"].getDevices(e.$store.getters.getToken);case 10:return i=t.sent,e.$store.commit("updateDevices",i),t.next=14,m["a"].getAllTags(e.$store.getters.getToken);case 14:r=t.sent,e.$store.commit("addTags",r),t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](3),console.log(t.t0),g["a"].setNotification("danger","Something went wrong");case 22:case"end":return t.stop()}}),t,null,[[3,18]])})))()}},F=E,I=(a("072d"),Object(y["a"])(F,s,o,!1,null,null,null)),L=I.exports;n["a"].use(i["a"]),n["a"].config.productionTip=!1,new n["a"]({store:r["a"],render:function(e){return e(L)}}).$mount("#app")},"898a":function(e,t,a){},c11d:function(e,t,a){},d646:function(e,t,a){"use strict";a("e060")},e060:function(e,t,a){}});
//# sourceMappingURL=locket.3c08e72f.js.map