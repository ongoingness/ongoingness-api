(function(e){function t(t){for(var n,r,o=t[0],c=t[1],l=t[2],d=0,m=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&m.push(s[r][0]),s[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(m.length)m.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,o=1;o<a.length;o++){var c=a[o];0!==s[c]&&(n=!1)}n&&(i.splice(t--,1),e=r(r.s=a[0]))}return e}var n={},s={refind:0},i=[];function r(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=n,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;i.push([0,"chunk-vendors","chunk-common"]),a()})({0:function(e,t,a){e.exports=a("5f15")},"052f":function(e,t,a){"use strict";a("bbaf")},"101c":function(e,t,a){"use strict";a("ad2f")},"2aac":function(e,t,a){},"5f15":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("92c6"),a("4888");var n=a("2b0e"),s=a("2f62"),i=a("4360"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("Title",{attrs:{title:"Refind",canDelete:"true"}}),e.isLoggedIn?e._e():a("AuthForm"),e.isLoggedIn?a("NavTabs",{on:{"on-update":e.tabUpdate}}):e._e(),e.isLoggedIn?a("div",[e.active.media?a("Media"):e._e(),e.active.devices?a("Devices"):e._e()],1):e._e(),a("Notification"),a("FooterBar")],1)},o=[],c=a("1da1"),l=(a("96cf"),a("159b"),a("b64b"),a("43b3")),u=a("7289"),d=a("7039"),m=a("d722"),g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container",attrs:{id:"media"}},[a("h2",{staticClass:"is-size-3"},[e._v("Media")]),a("UploadMedia"),a("h2",{staticClass:"is-size-4"},[e._v("Your Tags"),a("div",{staticClass:"hide-buttons"},[e.showTags?a("button",{staticClass:"button",on:{click:e.submit}},[e._v("Hide Tags")]):a("button",{staticClass:"button",on:{click:e.submit}},[e._v("Show Tags")])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showTags,expression:"showTags"}],staticClass:"media-collection"},[e._l(e.timeTags,(function(e){return a("TagTime",{attrs:{tagname:e}})})),e._l(e.tags,(function(e){return a("TagGeneral",{attrs:{tagname:e}})})),e._l(e.placeTags,(function(e){return a("TagPlace",{attrs:{tagname:e}})})),e._l(e.peopleTags,(function(e){return a("TagPeople",{attrs:{tagname:e}})}))],2),a("h2",{staticClass:"is-size-4"},[e._v("Your Media")]),e.presentMedia.length>0||e.pastMedia.length>0?a("div",{staticClass:"all-media"},[a("h2",{staticClass:"is-size-4 media-header"},[e._v("Present Media")]),a("p",[e._v("This is your media from the present. Every time a new present media is uploaded, a new set of past media is sent to the piece.")]),a("div",{staticClass:"media-collection"},e._l(e.presentMedia,(function(e){return a("MediaItem",{key:e.id,staticClass:"media-item",attrs:{media:e}})})),1),a("h2",{staticClass:"is-size-4 media-header"},[e._v("Past Media")]),a("p",[e._v("This is your media from the past. The Refind will show 5 pieces of media you upload here.")]),a("div",{staticClass:"media-collection"},e._l(e.pastMedia,(function(e){return a("MediaItem",{key:e.id,staticClass:"media-item",attrs:{media:e}})})),1)]):a("div",[a("p",[e._v("You have not uploaded any media.")])])],1)},f=[],p=(a("4de4"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"media-item"}},[a("div",{staticClass:"actions has-text-right"},[a("span",{staticClass:"icon action",on:{click:function(t){return e.deleteMedia(e.media._id)}}},[a("i",{staticClass:"fas fa-trash"})])]),a("figure",[a("img",{attrs:{src:e.imageUrl}})]),a("br"),a("div",{staticClass:"has-text-centered"},[a("div",{staticClass:"date"},[a("p",[e._v("Added on:")]),e._v(e._s(e.formattedDate))])]),a("div",{staticClass:"has-text-centered tag-container"},[a("p",[e._v("Tags:")]),a("div",{staticClass:"tag-list"},e._l(e.tags,(function(t){return a("Tag",{key:e.tagKey(t),attrs:{tagname:t}})})),1)])])}),v=[],h=(a("99af"),a("df40")),b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isTime?a("div",{staticClass:"tag is-link media-tag"},[a("div",{staticClass:"tag-name"}),e._v(" "+e._s(e.setName))]):e.isPlace?a("div",{staticClass:"tag is-danger media-tag"},[a("div",{staticClass:"tag-name"}),e._v(" "+e._s(e.setName))]):e.isPerson?a("div",{staticClass:"tag is-warning media-tag"},[a("div",{staticClass:"tag-name"}),e._v(" "+e._s(e.setName))]):a("div",{staticClass:"tag is-primary media-tag"},[a("div",{staticClass:"tag-name"}),e._v(" "+e._s(e.setName))])},_=[],T=(a("caad"),a("2532"),a("1276"),a("ac1f"),{props:["tagname"],name:"Tag",computed:{setName:function(){return this.tagname.includes("/")?this.tagname.split("/")[1]:this.tagname.includes("@")?this.tagname.split("@")[1]:this.tagname},isTime:function(){return this.tagname.includes("t/")||this.tagname.includes("time/")},isPlace:function(){return this.tagname.includes("p/")||this.tagname.includes("place/")},isPerson:function(){return this.tagname.includes("@")}}}),C=T,w=(a("602b"),a("2877")),k=Object(w["a"])(C,b,_,!1,null,"7daaa89e",null),y=k.exports,x={props:["media"],name:"MediaItem",components:{Tag:y},computed:{imageUrl:function(){return"".concat(m["a"].URL,"/media/").concat(this.media._id,"?token=").concat(this.$store.getters.getToken)},formattedDate:function(){var e={weekday:"long",year:"numeric",month:"short",day:"numeric"},t=new Date(this.media.createdAt);return t.toLocaleDateString(e)},tags:function(){return this.media.emotions}},methods:{deleteMedia:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,m["a"].deleteMedia(e,t.$store.getters.getToken);case 3:a.next=9;break;case 5:return a.prev=5,a.t0=a["catch"](0),h["a"].setNotification("danger","Could not delete media"),a.abrupt("return");case 9:t.$store.commit("removeMedia",e);case 10:case"end":return a.stop()}}),a,null,[[0,5]])})))()},tagKey:function(e){return"".concat(this.media._id,"-").concat(e)}}},M=x,$=(a("8295"),Object(w["a"])(M,p,v,!1,null,"b161fb4e",null)),P=$.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"upload-media"}},[a("h2",{staticClass:"is-size-4"},[e._v("Upload Media")]),a("div",{staticClass:"hide-buttons"},[e.isHidden?a("button",{staticClass:"button",on:{click:e.submit}},[e._v("Add Media")]):a("button",{staticClass:"button",on:{click:e.submit}},[e._v("Close")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isHidden,expression:"!isHidden"}]},[a("div",{staticClass:"file is-boxed file-upload"},[a("label",{staticClass:"file-label"},[a("input",{staticClass:"file-input",attrs:{type:"file",name:"file"},on:{change:e.handleFileChange}}),e._m(0),a("span",{staticClass:"file-name"},[e._v(e._s(e.filename))])])]),a("div",{staticClass:"control image-tag-selection"},[a("p",[e._v("Is your content from the:")]),a("label",{staticClass:"radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ltag,expression:"ltag"}],attrs:{type:"radio",name:"mtag",value:"present"},domProps:{checked:e._q(e.ltag,"present")},on:{change:function(t){e.ltag="present"}}}),e._v(" Present")]),a("br"),a("label",{staticClass:"radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ltag,expression:"ltag"}],attrs:{type:"radio",name:"mtag",value:"past"},domProps:{checked:e._q(e.ltag,"past")},on:{change:function(t){e.ltag="past"}}}),e._v(" Past")])]),a("div",{staticClass:"emotions"},[a("p",[e._v("Please best describe this content using tags.")]),e._m(1),a("div",[a("multiselect",{attrs:{"tag-placeholder":"Add this as new tag",placeholder:"Search or add a tag",label:"name","track-by":"name",options:e.options,multiple:!0,taggable:!0},on:{tag:e.addTag,"search-change":e.getSuggestedTags,update:e.asyncUpdate},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),a("p")]),a("br"),a("div"),a("button",{staticClass:"button upload-button is-primary",class:{"is-loading":e.isBusy},attrs:{disabled:null===e.file||void 0===e.file},on:{click:e.uploadFile}},[e._v("Upload")])])])},O=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"file-cta"},[a("span",{staticClass:"file-icon"},[a("i",{staticClass:"fas fa-upload"})]),a("span",{staticClass:"file-label has-text-centered"},[e._v("Choose a file")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",[e._v("There are 3 types of tags:")]),a("ul",{staticClass:"tagtypes"},[a("li",[e._v("@ - People")]),a("li",[e._v("t/ - Time")]),a("li",[e._v("p/ - Place")])]),a("p",[e._v("To use them insert the following characters at the start of the tag:")]),a("p",[e._v("Example: t/now")])])}],j=(a("b0c0"),a("fb6a"),a("8e5f")),E=a.n(j),S={components:{Multiselect:E.a},name:"UploadMedia",props:["selectedMedia"],data:function(){return{file:null,era:"past",ltag:"present",isBusy:!1,isHidden:!0,emotions:[],lcontent:"file",value:[],options:[],linkedMedia:[]}},methods:{submit:function(){this.isHidden=!this.isHidden},addTag:function(e){this.value.push({name:e})},uploadFile:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.ltag){t.next=3;break}return h["a"].setNotification("warning","You must select whether media is permanent or temporary"),t.abrupt("return");case 3:return e.isBusy=!0,t.prev=4,a="",e.value.forEach((function(e){a+="".concat(e.name,",")})),a=a.slice(0,-1),t.next=10,m["a"].uploadMedia(e.file,{era:e.era,locket:e.ltag,emotions:a,links:""},e.$store.getters.getToken);case 10:n=t.sent,e.file=null,e.$store.commit("addMedia",n),t.next=19;break;case 15:t.prev=15,t.t0=t["catch"](4),h["a"].setNotification("danger","Something went wrong"),e.file=null;case 19:return t.prev=19,e.isBusy=!1,e.options=[],e.value=[],t.finish(19);case 24:case"end":return t.stop()}}),t,null,[[4,15,19,24]])})))()},handleFileChange:function(e){this.file=e.target.files[0]},getSuggestedTags:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var n,s,i,r,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(0!==e.length){a.next=4;break}t.options=[],a.next=10;break;case 4:return a.next=6,m["a"].getTagSuggestion(t.$store.getters.getToken,e);case 6:for(n=a.sent,s=[],i=0;i<n.length;i+=1)r="",o=n[i].name,e.includes("t/")?(r="t/",o=n[i].value):e.includes("p/")?r="p/":e.includes("@")&&(r="@"),s.push({name:"".concat(r).concat(o)});t.options=s;case 10:case"end":return a.stop()}}),a)})))()},asyncUpdate:function(e){this.options=e}},computed:{filename:function(){return null===this.file||void 0===this.file?"Your media":this.file.name}}},U=S,R=(a("78ac"),Object(w["a"])(U,N,O,!1,null,"e13dce72",null)),D=R.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tag is-primary media-tag"},[a("div",{staticClass:"tag-name"}),e._v(" "+e._s(e.setName))])},A=[],F={props:["tagname"],name:"TagGeneral",computed:{setName:function(){return this.tagname}}},H=F,z=(a("fb69"),Object(w["a"])(H,I,A,!1,null,"a44634ca",null)),B=z.exports,L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tag is-danger media-tag"},[a("div",{staticClass:"tag-name"}),e._v(" "+e._s(e.setName))])},Y=[],G={props:["tagname"],name:"TagPeople",computed:{setName:function(){return this.tagname}}},q=G,J=(a("89c4"),Object(w["a"])(q,L,Y,!1,null,"0e1a6764",null)),K=J.exports,Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tag is-warning media-tag"},[a("div",{staticClass:"tag-name"}),e._v(" "+e._s(e.setName))])},V=[],W={props:["tagname"],name:"TagPlace",computed:{setName:function(){return this.tagname}}},X=W,Z=(a("101c"),Object(w["a"])(X,Q,V,!1,null,"ee1b2722",null)),ee=Z.exports,te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tag is-link media-tag"},[a("div",{staticClass:"tag-name"}),e._v(" "+e._s(e.setName))])},ae=[],ne={props:["tagname"],name:"TagTime",computed:{setName:function(){return this.tagname}}},se=ne,ie=(a("ed54"),Object(w["a"])(se,te,ae,!1,null,"aedbcf9e",null)),re=ie.exports,oe={name:"Media",components:{UploadMedia:D,MediaItem:P,TagGeneral:B,TagPeople:K,TagPlace:ee,TagTime:re},data:function(){return{showTags:!1}},methods:{submit:function(){this.showTags=!this.showTags}},computed:{presentMedia:function(){return this.$store.getters.getMedia.filter((function(e){return"present"===e.locket}))},pastMedia:function(){return this.$store.getters.getMedia.filter((function(e){return"past"===e.locket}))},tags:function(){return this.$store.getters.getTags},timeTags:function(){return this.$store.getters.getTimeTags},placeTags:function(){return this.$store.getters.getPlacesTags},peopleTags:function(){return this.$store.getters.getPeopleTags}}},ce=oe,le=(a("797b"),Object(w["a"])(ce,g,f,!1,null,"f38febde",null)),ue=le.exports,de=a("8bb1"),me=a("046b"),ge=a("efac"),fe=a("4093"),pe={name:"app",components:{FooterBar:fe["a"],Notification:ge["a"],Devices:me["a"],NavTabs:de["a"],Media:ue,AuthForm:u["a"],Title:l["a"]},data:function(){return{active:{media:!0,devices:!1}}},computed:{isLoggedIn:function(){return this.$store.getters.getToken}},methods:{tabUpdate:function(e){var t=this;Object.keys(this.active).forEach((function(e){t.active[e]=!1})),this.active[e]=!0}},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,n,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=d["a"].get("authToken"),!a){t.next=22;break}return e.$store.commit("updateToken",a),t.prev=3,t.next=6,m["a"].getAllMedia(e.$store.getters.getToken);case 6:return n=t.sent,e.$store.commit("updateMedia",n),t.next=10,m["a"].getDevices(e.$store.getters.getToken);case 10:return s=t.sent,e.$store.commit("updateDevices",s),t.next=14,m["a"].getAllTags(e.$store.getters.getToken);case 14:i=t.sent,e.$store.commit("addTags",i),t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](3),console.log(t.t0),h["a"].setNotification("danger","Something went wrong");case 22:case"end":return t.stop()}}),t,null,[[3,18]])})))()}},ve=pe,he=(a("052f"),Object(w["a"])(ve,r,o,!1,null,null,null)),be=he.exports;n["a"].use(s["a"]),n["a"].config.productionTip=!1,new n["a"]({store:i["a"],render:function(e){return e(be)}}).$mount("#app")},"602b":function(e,t,a){"use strict";a("2aac")},"6cf9":function(e,t,a){},"78ac":function(e,t,a){"use strict";a("9e9f")},"797b":function(e,t,a){"use strict";a("f756")},8295:function(e,t,a){"use strict";a("e6f7")},"89c4":function(e,t,a){"use strict";a("d6b7")},"9e9f":function(e,t,a){},ad2f:function(e,t,a){},bbaf:function(e,t,a){},d6b7:function(e,t,a){},e6f7:function(e,t,a){},ed54:function(e,t,a){"use strict";a("6cf9")},f204:function(e,t,a){},f756:function(e,t,a){},fb69:function(e,t,a){"use strict";a("f204")}});
//# sourceMappingURL=refind.e2ca53df.js.map